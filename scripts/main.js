function buildNodeFromDefinition(e,n){var t=e[n],l={};if(l.name=t.name,void 0!==t.description&&null!==t.description&&(l.description=marked(t.description)),l.type=n,void 0!==t.allowExtension?l.allowExtension=t.allowExtension:l.allowExtension=!1,void 0!==t.fieldsGroup?l.fieldsGroup=t.fieldsGroup:l.fieldsGroup=!1,l.fieldsGroup||void 0===l.type)l.openapiType=!1;else{l.openapiType=!0;var a=l.type.replace(/ /g,"").replace("[","").replace("]","");a=a.charAt(0).toLowerCase()+a.slice(1),l.openapiTypeURL="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#"+a}l.required=t.required,l.closedChildren=[];for(var i in t.fields)l.closedChildren.push(buildNodeFromField(e,t.fields[i]));return l.allowExtension&&l.closedChildren.push(buildNodeFromField(e,e["Specification Extensions"])),l}function buildNodeFromField(e,n){var t={},l=!1;if(void 0!==n.type){t.openapiType=!1;var a;n.type.indexOf("[")>=0?(a=n.type.substring(1,n.type.length-1),l=!0):(a=n.type,l=!1),void 0!==e[a]&&(t=buildNodeFromDefinition(e,a))}if(t.name=n.name,t.type=n.type,t.array=l,void 0!==n.description&&(t.description=marked(n.description)),void 0!==n.values)for(var i=0;i<n.values.length;i++)void 0!==n.values[i].description&&null!==n.values[i].description&&(n.values[i].description=marked(n.values[i].description));return t.required=n.required,t.gfm=n.gfm,t.patterned=n.patterned,t.values=n.values,t}function buildTree(e){var n=buildNodeFromDefinition(e,"Swagger Object");return n}function drawTree(e){function n(e){e.description&&(x.transition().duration(200).style("opacity",.9),x.html(template(e)).style("height",y+"px").style("overflow","scroll"))}function t(e){}function l(e,n,t){if(e){n(e);var a=t(e);if(a)for(var i=a.length,r=0;r<i;r++)l(a[r],n,t)}}function a(){A.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}function i(e){var n=w.scale(),t=-e.y0,l=-e.x0;t=t*n+v/2,l=l*n+y/2,d3.select("g").transition().duration(m).attr("transform","translate("+t+","+l+")scale("+n+")"),w.scale(n),w.translate([t,l])}function r(e){return e.children?(e.closedChildren=e.children,e.children=null):e.closedChildren&&(e.children=e.closedChildren,e.closedChildren=null),e}function o(e){d3.event.defaultPrevented||(e=r(e),s(e),i(e))}function s(e){var l=[1],a=function(e,n){n.children&&n.children.length>0&&(l.length<=e+1&&l.push(0),l[e+1]+=n.children.length,n.children.forEach(function(n){a(e+1,n)}))};a(0,c);var i=25*d3.max(l);g=g.size([i,v]);var r=g.nodes(c).reverse(),s=g.links(r);r.forEach(function(e){e.y=e.depth*(10*p)});var u=A.selectAll("g.node").data(r,function(e){return e.id||(e.id=++h)}),d=u.enter().append("g").attr("class","node").attr("transform",function(n){return"translate("+e.y0+","+e.x0+")"}).on("click",o).on("mouseover",function(e){n(e)}).on("mouseout",function(e){t(e)});d.append("circle").attr("class","nodeCircle").attr("r",0).style("fill",function(e){return e.closedChildren?"lightsteelblue":"#fff"});d.append("text").attr("x",function(e){return e.children||e.closedChildren?-10:10}).attr("dy",".35em").attr("class","nodeText").attr("text-anchor",function(e){return e.children||e.closedChildren?"end":"start"}).text(function(e){return e.name}).style("fill-opacity",0);d.append("circle").attr("class","ghostCircle").attr("r",30).style("fill","red").attr("pointer-events","mouseover").on("mouseover",function(e){E(e)}).on("mouseout",function(e){T(e)}),u.select("text").attr("x",function(e){return e.children||e.closedChildren?-10:10}).attr("text-anchor",function(e){return e.children||e.closedChildren?"end":"start"}).text(function(e){return e.name}),u.select("circle.nodeCircle").attr("r",4.5).style("fill",function(e){return e.closedChildren?"lightsteelblue":"#fff"});var f=u.transition().duration(m).attr("transform",function(e){return"translate("+e.y+","+e.x+")"});f.select("text").style("fill-opacity",1);var y=u.exit().transition().duration(m).attr("transform",function(n){return"translate("+e.y+","+e.x+")"}).remove();y.select("circle").attr("r",0),y.select("text").style("fill-opacity",0);var x=A.selectAll("path.link").data(s,function(e){return e.target.id});x.enter().insert("path","g").attr("class","link").attr("d",function(n){var t={x:e.x0,y:e.y0};return b({source:t,target:t})}),x.transition().duration(m).attr("d",b),x.exit().transition().duration(m).attr("d",function(n){var t={x:e.x,y:e.y};return b({source:t,target:t})}).remove(),r.forEach(function(e){e.x0=e.x,e.y0=e.y})}var c,u=0,p=0,d=null,f=null,h=0,m=750,v=$("#tree-container").width(),y=$(document).height()-$("#tree-container").position().top-50,g=($("#tree-container").position().top,$("#tree-container").position().left,d3.layout.tree().size([y,v])),x=d3.select("#tooltip-container").attr("id","node-tooltip"),b=d3.svg.diagonal().projection(function(e){return[e.y,e.x]});l(e,function(e){u++,p=Math.max(e.name.length,p)},function(e){return e.children&&e.children.length>0?e.children:null});var w=d3.behavior.zoom().scaleExtent([.1,3]).on("zoom",a),C=d3.select("#tree-container").append("svg").attr("width",v).attr("height",y).attr("class","overlay").call(w),E=function(e){d=e,k()},T=function(e){d=null,k()},k=function(){var e=[];null!==f&&null!==d&&(e=[{source:{x:d.y0,y:d.x0},target:{x:f.y0,y:f.x0}}]);var n=A.selectAll(".templink").data(e);n.enter().append("path").attr("class","templink").attr("d",d3.svg.diagonal()).attr("pointer-events","none"),n.attr("d",d3.svg.diagonal()),n.exit().remove()},A=C.append("g");c=e,c.x0=y/2,c.y0=0,s(c),i(c)}this.OpenAPISpecificationVisualDocumentation=this.OpenAPISpecificationVisualDocumentation||{},this.OpenAPISpecificationVisualDocumentation.tooltip=Handlebars.template({1:function(e,n,t,l,a){var i,r;return'    <i class="fa fa-indent fa-2x fa-pull-left"></i><p>'+(null!=(r=null!=(r=t.description||(null!=n?n.description:n))?r:t.helperMissing,i="function"==typeof r?r.call(null!=n?n:{},{name:"description",hash:{},data:a}):r)?i:"")+"</p>\n"},3:function(e,n,t,l,a){var i,r,o=null!=n?n:{},s=t.helperMissing,c="function";return"    <h1>"+e.escapeExpression((r=null!=(r=t.name||(null!=n?n.name:n))?r:s,typeof r===c?r.call(o,{name:"name",hash:{},data:a}):r))+'</h1>\n    <div class=".list-group">\n'+(null!=(i=t["if"].call(o,null!=n?n.required:n,{name:"if",hash:{},fn:e.program(4,a,0),inverse:e.noop,data:a}))?i:"")+(null!=(i=t["if"].call(o,null!=n?n.array:n,{name:"if",hash:{},fn:e.program(6,a,0),inverse:e.noop,data:a}))?i:"")+(null!=(i=t["if"].call(o,null!=n?n.closedChildren:n,{name:"if",hash:{},fn:e.program(8,a,0),inverse:e.program(10,a,0),data:a}))?i:"")+(null!=(i=t["if"].call(o,null!=n?n.gfm:n,{name:"if",hash:{},fn:e.program(15,a,0),inverse:e.noop,data:a}))?i:"")+(null!=(i=t["if"].call(o,null!=n?n.allowExtension:n,{name:"if",hash:{},fn:e.program(17,a,0),inverse:e.noop,data:a}))?i:"")+(null!=(i=t["if"].call(o,null!=n?n.openapiType:n,{name:"if",hash:{},fn:e.program(19,a,0),inverse:e.noop,data:a}))?i:"")+"  </div>\n    <h2>Description</h2>\n    <p>"+(null!=(r=null!=(r=t.description||(null!=n?n.description:n))?r:s,i=typeof r===c?r.call(o,{name:"description",hash:{},data:a}):r)?i:"")+"</p>\n\n"+(null!=(i=t["if"].call(o,null!=n?n.values:n,{name:"if",hash:{},fn:e.program(21,a,0),inverse:e.noop,data:a}))?i:"")},4:function(e,n,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-asterisk fa-fw fa-2x"></i>&nbsp;Required</p>\n'},6:function(e,n,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-list-ul fa-fw fa-2x"></i>&nbsp;Array</p>\n'},8:function(e,n,t,l,a){var i;return'      <p class=".list-group-item"><i class="fa fa-cubes fa-fw fa-2x"></i>&nbsp;'+e.escapeExpression((i=null!=(i=t.type||(null!=n?n.type:n))?i:t.helperMissing,"function"==typeof i?i.call(null!=n?n:{},{name:"type",hash:{},data:a}):i))+"</p>\n"},10:function(e,n,t,l,a){var i;return null!=(i=t["if"].call(null!=n?n:{},null!=n?n.children:n,{name:"if",hash:{},fn:e.program(11,a,0),inverse:e.program(13,a,0),data:a}))?i:""},11:function(e,n,t,l,a){var i;return'        <p class=".list-group-item"><i class="fa fa-cubes fa-fw fa-2x"></i>&nbsp;'+e.escapeExpression((i=null!=(i=t.type||(null!=n?n.type:n))?i:t.helperMissing,"function"==typeof i?i.call(null!=n?n:{},{name:"type",hash:{},data:a}):i))+"</p>\n"},13:function(e,n,t,l,a){var i;return'        <p class=".list-group-item"><i class="fa fa-cube fa-fw fa-2x"></i>&nbsp;'+e.escapeExpression((i=null!=(i=t.type||(null!=n?n.type:n))?i:t.helperMissing,"function"==typeof i?i.call(null!=n?n:{},{name:"type",hash:{},data:a}):i))+"</p>\n"},15:function(e,n,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-github-alt fa-fw fa-2x"></i>&nbsp;Allows GFM</p>\n'},17:function(e,n,t,l,a){return'      <p class=".list-group-item"><i class="fa fa-code-fork fa-fw fa-2x"></i>&nbsp;Allows extension</p>\n'},19:function(e,n,t,l,a){var i;return'      <p class=".list-group-item"><i class="fa fa-external-link fa-fw fa-2x"></i>&nbsp;<a href="'+e.escapeExpression((i=null!=(i=t.openapiTypeURL||(null!=n?n.openapiTypeURL:n))?i:t.helperMissing,"function"==typeof i?i.call(null!=n?n:{},{name:"openapiTypeURL",hash:{},data:a}):i))+'" target="_blank">OpenAPI Specification documentation</a></p>\n'},21:function(e,n,t,l,a){var i,r,o,s='      <h2>Values</h2>\n      <table id="table" class="table table-striped table-bordered table-condensed table-hover" >\n        <tr>\n            <th>\n                Value\n            </th>\n            <th>\n                Default\n            </th>\n            <th>\n                Description\n            </th>\n        </tr>\n\n';return r=null!=(r=t.values||(null!=n?n.values:n))?r:t.helperMissing,o={name:"values",hash:{},fn:e.program(22,a,0),inverse:e.noop,data:a},i="function"==typeof r?r.call(null!=n?n:{},o):r,t.values||(i=t.blockHelperMissing.call(n,i,o)),null!=i&&(s+=i),s+"      </table>\n"},22:function(e,n,t,l,a){var i,r=e.lambda,o=e.escapeExpression;return"        <tr>\n          <td>"+o(r(null!=n?n.value:n,n))+"</td>\n          <td>"+o(r(null!=n?n["default"]:n,n))+"</td>\n          <td>"+(null!=(i=r(null!=n?n.description:n,n))?i:"")+"</td>\n        </tr>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,t,l,a){var i;return'<div class="entry">\n'+(null!=(i=t["if"].call(null!=n?n:{},null!=n?n.fieldsGroup:n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?i:"")+"</div>\n"},useData:!0});var template=OpenAPISpecificationVisualDocumentation.tooltip,xmlhttp=new XMLHttpRequest,url="openapi-specification.json";xmlhttp.onreadystatechange=function(){if(4===xmlhttp.readyState&&200===xmlhttp.status){var e=JSON.parse(xmlhttp.responseText),n=buildTree(e);drawTree(n)}},xmlhttp.open("GET",url,!0),xmlhttp.send();